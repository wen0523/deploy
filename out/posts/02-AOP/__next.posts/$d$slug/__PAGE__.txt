1:"$Sreact.fragment"
2:I[39494,["/_next/static/chunks/75ea25e80b6d3b00.js","/_next/static/chunks/79d97871584e3ffd.js","/_next/static/chunks/810067374a9e0899.js"],"default"]
3:I[22016,["/_next/static/chunks/75ea25e80b6d3b00.js","/_next/static/chunks/79d97871584e3ffd.js","/_next/static/chunks/810067374a9e0899.js"],""]
e:I[22495,["/_next/static/chunks/75ea25e80b6d3b00.js","/_next/static/chunks/79d97871584e3ffd.js","/_next/static/chunks/810067374a9e0899.js"],"default"]
12:I[88393,["/_next/static/chunks/75ea25e80b6d3b00.js","/_next/static/chunks/79d97871584e3ffd.js","/_next/static/chunks/810067374a9e0899.js"],"default"]
13:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/fabdb5af8027d3fa.js"],"OutletBoundary"]
14:"$Sreact.suspense"
16:I[44813,["/_next/static/chunks/75ea25e80b6d3b00.js","/_next/static/chunks/79d97871584e3ffd.js","/_next/static/chunks/810067374a9e0899.js"],"default"]
0:{"buildId":"2Ozkn6_1m22k4rI__ncKq","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"min-h-screen relative","children":[["$","div",null,{"className":"fixed inset-0 -z-20 overflow-hidden","children":[["$","div",null,{"className":"absolute top-0 left-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse","style":{"animationDuration":"4s"}}],["$","div",null,{"className":"absolute top-1/4 right-0 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse","style":{"animationDuration":"5s","animationDelay":"1s"}}],["$","div",null,{"className":"absolute bottom-0 left-1/3 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse","style":{"animationDuration":"6s","animationDelay":"2s"}}]]}],["$","$L2",null,{"banner":"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1920&auto=format&fit=crop","title":"Spring Boot AOP å®Œæ•´æŒ‡å—ï¼ˆäºŒï¼‰ï¼šåŸºç¡€ä½¿ç”¨å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼"}],["$","main",null,{"className":"relative z-10 w-full bg-gradient-to-b from-zinc-50/98 via-white/95 to-zinc-50/98 dark:from-black/98 dark:via-zinc-950/95 dark:to-black/98 backdrop-blur-md shadow-2xl","children":["$","div",null,{"className":"max-w-7xl mx-auto py-12 px-6","children":["$","div",null,{"className":"flex gap-8 items-start","children":[["$","div",null,{"className":"flex-1 min-w-0 max-w-4xl","children":[["$","header",null,{"className":"mb-8 relative","children":[["$","div",null,{"className":"absolute -inset-6 bg-gradient-to-r from-purple-500/10 via-pink-500/10 to-purple-500/10 rounded-3xl blur-2xl -z-10"}],["$","div",null,{"className":"relative rounded-2xl bg-gradient-to-br from-white/90 via-purple-50/50 to-pink-50/30 dark:from-zinc-900/90 dark:via-purple-950/30 dark:to-pink-950/20 backdrop-blur-xl border border-purple-200/50 dark:border-purple-800/30 p-8 shadow-2xl","children":[["$","div",null,{"className":"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 rounded-t-2xl"}],["$","h2",null,{"className":"text-3xl md:text-4xl font-extrabold tracking-tight bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 bg-clip-text text-transparent mb-6 leading-tight","children":"Spring Boot AOP å®Œæ•´æŒ‡å—ï¼ˆäºŒï¼‰ï¼šåŸºç¡€ä½¿ç”¨å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼"}],["$","div",null,{"className":"flex flex-wrap items-center gap-4 text-sm mb-5","children":[["$","div",null,{"className":"flex items-center gap-2 px-3 py-1.5 rounded-full bg-purple-100/80 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 backdrop-blur-sm","children":[["$","span",null,{"children":"ğŸ“…"}],["$","span",null,{"className":"font-medium","children":"Tue Dec 02 2025 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)"}]]}],["$","div",null,{"className":"flex items-center gap-2 px-3 py-1.5 rounded-full bg-pink-100/80 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 backdrop-blur-sm","children":[["$","span",null,{"children":"ğŸ“‚"}],["$","$L3",null,{"href":"/categories/%E6%95%99%E7%A8%8B","className":"font-medium hover:underline transition-all","children":"æ•™ç¨‹"}]]}],["$","div",null,{"className":"flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-100/80 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 backdrop-blur-sm","children":[["$","span",null,{"children":"â±ï¸"}],["$","span",null,{"className":"font-medium","children":[4," min"]}]]}],["$","div",null,{"className":"flex items-center gap-2 px-3 py-1.5 rounded-full bg-green-100/80 dark:bg-green-900/30 text-green-700 dark:text-green-300 backdrop-blur-sm","children":[["$","span",null,{"children":"ğŸ“"}],["$","span",null,{"className":"font-medium","children":[665," å­—"]}]]}]]}],["$","div",null,{"className":"flex flex-wrap gap-2 mb-6","children":[["$","$L3","Spring Boot",{"href":"/tags/Spring%20Boot","className":"group px-4 py-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-semibold shadow-md hover:shadow-purple-500/50 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center gap-1.5","children":["$L4","$L5"]}],"$L6","$L7","$L8"]}],"$L9"]}]]}],"$La"]}],"$Lb"]}]}]}]]}],["$Lc"],"$Ld"]}],"loading":null,"isPartial":false}
4:["$","span",null,{"className":"text-sm","children":"ğŸ·ï¸"}]
5:["$","span",null,{"children":"Spring Boot"}]
6:["$","$L3","AOP",{"href":"/tags/AOP","className":"group px-4 py-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-semibold shadow-md hover:shadow-purple-500/50 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center gap-1.5","children":[["$","span",null,{"className":"text-sm","children":"ğŸ·ï¸"}],["$","span",null,{"children":"AOP"}]]}]
7:["$","$L3","Java",{"href":"/tags/Java","className":"group px-4 py-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-semibold shadow-md hover:shadow-purple-500/50 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center gap-1.5","children":[["$","span",null,{"className":"text-sm","children":"ğŸ·ï¸"}],["$","span",null,{"children":"Java"}]]}]
8:["$","$L3","åç«¯å¼€å‘",{"href":"/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91","className":"group px-4 py-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-semibold shadow-md hover:shadow-purple-500/50 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center gap-1.5","children":[["$","span",null,{"className":"text-sm","children":"ğŸ·ï¸"}],["$","span",null,{"children":"åç«¯å¼€å‘"}]]}]
9:["$","div",null,{"className":"flex flex-wrap gap-3 pt-6 border-t border-purple-200/50 dark:border-purple-800/30","children":[["$","$L3",null,{"href":"/","className":"group px-5 py-2.5 rounded-lg bg-white dark:bg-zinc-800 border-2 border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300 font-medium shadow-md hover:shadow-purple-500/30 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center gap-2","children":[["$","svg",null,{"className":"w-4 h-4","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M10 19l-7-7m0 0l7-7m-7 7h18"}]}],["$","span",null,{"children":"è¿”å›é¦–é¡µ"}]]}],["$","$L3",null,{"href":"/categories/%E6%95%99%E7%A8%8B","className":"group px-5 py-2.5 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium shadow-lg hover:shadow-purple-500/50 transition-all duration-300 hover:scale-105 active:scale-95 flex items-center gap-2","children":[["$","span",null,{"children":"ğŸ“‚"}],["$","span",null,{"children":["æ›´å¤š","æ•™ç¨‹"]}]]}]]}]
f:T4e75,<h1>Spring Boot AOP å®Œæ•´æŒ‡å—ï¼ˆäºŒï¼‰ï¼šåŸºç¡€ä½¿ç”¨å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h1>
<h2>ä¸€ã€åˆ›å»ºç®€å•åˆ‡é¢</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº† AOP çš„åŸºç¡€æ¦‚å¿µå’Œç¯å¢ƒæ­å»ºã€‚ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹å®é™…ç¼–å†™åˆ‡é¢ä»£ç ã€‚</p>
<h3>1. å®Œæ•´çš„åˆ‡é¢ç¤ºä¾‹</h3>
<pre><code class="hljs language-java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> {

    <span class="hljs-comment">// å®šä¹‰åˆ‡å…¥ç‚¹ï¼šåŒ¹é…serviceåŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serviceMethods</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// å‰ç½®é€šçŸ¥</span>
    <span class="hljs-meta">@Before("serviceMethods()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logBefore</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        log.info(<span class="hljs-string">"æ‰§è¡Œæ–¹æ³•: {}"</span>, methodName);
    }

    <span class="hljs-comment">// ç¯ç»•é€šçŸ¥</span>
    <span class="hljs-meta">@Around("serviceMethods()")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">logAround</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        log.info(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œè€—æ—¶: {}ms"</span>, endTime - startTime);

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">// è¿”å›é€šçŸ¥</span>
    <span class="hljs-meta">@AfterReturning(pointcut = "serviceMethods()", returning = "result")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfterReturning</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span> {
        log.info(<span class="hljs-string">"æ–¹æ³•è¿”å›å€¼: {}"</span>, result);
    }

    <span class="hljs-comment">// å¼‚å¸¸é€šçŸ¥</span>
    <span class="hljs-meta">@AfterThrowing(pointcut = "serviceMethods()", throwing = "error")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfterThrowing</span><span class="hljs-params">(JoinPoint joinPoint, Throwable error)</span> {
        log.error(<span class="hljs-string">"æ–¹æ³•æŠ›å‡ºå¼‚å¸¸: {}"</span>, error.getMessage());
    }
}
</code></pre>
<h3>2. é€šçŸ¥ç±»å‹è¯¦è§£</h3>
<h4>@Before - å‰ç½®é€šçŸ¥</h4>
<p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œï¼Œå¸¸ç”¨äºå‚æ•°æ ¡éªŒã€æƒé™æ£€æŸ¥ç­‰ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-meta">@Before("serviceMethods()")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logBefore</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
    Object[] args = joinPoint.getArgs();
    log.info(<span class="hljs-string">"æ‰§è¡Œæ–¹æ³•: {}, å‚æ•°: {}"</span>, methodName, Arrays.toString(args));
}
</code></pre>
<h4>@After - åç½®é€šçŸ¥</h4>
<p>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œï¼ˆæ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œå¸¸ç”¨äºèµ„æºæ¸…ç†ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-meta">@After("serviceMethods()")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfter</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
    log.info(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œå®Œæˆ: {}"</span>, joinPoint.getSignature().getName());
}
</code></pre>
<h4>@AfterReturning - è¿”å›é€šçŸ¥</h4>
<p>åœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œï¼Œå¯ä»¥è·å–è¿”å›å€¼ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-meta">@AfterReturning(pointcut = "serviceMethods()", returning = "result")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfterReturning</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span> {
    log.info(<span class="hljs-string">"æ–¹æ³• {} è¿”å›å€¼: {}"</span>, joinPoint.getSignature().getName(), result);
}
</code></pre>
<h4>@AfterThrowing - å¼‚å¸¸é€šçŸ¥</h4>
<p>åœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œï¼Œå¯ä»¥è·å–å¼‚å¸¸ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-meta">@AfterThrowing(pointcut = "serviceMethods()", throwing = "error")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfterThrowing</span><span class="hljs-params">(JoinPoint joinPoint, Throwable error)</span> {
    log.error(<span class="hljs-string">"æ–¹æ³• {} æŠ›å‡ºå¼‚å¸¸: {}"</span>,
        joinPoint.getSignature().getName(), error.getMessage());
}
</code></pre>
<h4>@Around - ç¯ç»•é€šçŸ¥</h4>
<p>æœ€å¼ºå¤§çš„é€šçŸ¥ç±»å‹ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-meta">@Around("serviceMethods()")</span>
<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">logAround</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
    log.info(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œå‰"</span>);

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();
        log.info(<span class="hljs-string">"æ–¹æ³•æ‰§è¡ŒæˆåŠŸ"</span>);
        <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (Throwable e) {
        log.error(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œå¼‚å¸¸"</span>, e);
        <span class="hljs-keyword">throw</span> e;
    } <span class="hljs-keyword">finally</span> {
        log.info(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œå®Œæˆ"</span>);
    }
}
</code></pre>
<h2>äºŒã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯¦è§£</h2>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç”¨äºå®šä¹‰åœ¨å“ªäº›æ–¹æ³•ä¸Šåº”ç”¨åˆ‡é¢é€»è¾‘ã€‚</p>
<h3>1. execution è¡¨è¾¾å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰</h3>
<p>execution è¡¨è¾¾å¼æ˜¯æœ€å¸¸ç”¨çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code>execution(ä¿®é¥°ç¬¦ è¿”å›ç±»å‹ åŒ….ç±».æ–¹æ³•(å‚æ•°))
</code></pre>
<h4>åŸºæœ¬ç¤ºä¾‹</h4>
<pre><code class="hljs language-java"><span class="hljs-comment">// åŒ¹é…æ‰€æœ‰publicæ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("execution(public * *(..))")</span>

<span class="hljs-comment">// åŒ¹é…serviceåŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..))")</span>

<span class="hljs-comment">// åŒ¹é…serviceåŒ…åŠå­åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service..*.*(..))")</span>

<span class="hljs-comment">// åŒ¹é…è¿”å›å€¼ä¸ºStringçš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("execution(String com.example.service.*.*(..))")</span>

<span class="hljs-comment">// åŒ¹é…ç‰¹å®šå‚æ•°çš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(Long))")</span>

<span class="hljs-comment">// åŒ¹é…ä»»æ„å‚æ•°çš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..))")</span>
</code></pre>
<h4>é€šé…ç¬¦è¯´æ˜</h4>
<ul>
<li><code>*</code>ï¼šåŒ¹é…ä»»æ„å­—ç¬¦ï¼Œä½†åªèƒ½åŒ¹é…ä¸€ä¸ªå…ƒç´ </li>
<li><code>..</code>ï¼šåŒ¹é…ä»»æ„å­—ç¬¦ï¼Œå¯ä»¥åŒ¹é…å¤šä¸ªå…ƒç´ </li>
<li><code>+</code>ï¼šåŒ¹é…æŒ‡å®šç±»åŠå…¶å­ç±»</li>
</ul>
<pre><code class="hljs language-java"><span class="hljs-comment">// * ç¤ºä¾‹</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..))")</span>
<span class="hljs-comment">// åŒ¹é…ï¼šcom.example.service.UserService.getUser()</span>
<span class="hljs-comment">// ä¸åŒ¹é…ï¼šcom.example.service.impl.UserServiceImpl.getUser()</span>

<span class="hljs-comment">// .. ç¤ºä¾‹</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service..*.*(..))")</span>
<span class="hljs-comment">// åŒ¹é…ï¼šcom.example.service.UserService.getUser()</span>
<span class="hljs-comment">// åŒ¹é…ï¼šcom.example.service.impl.UserServiceImpl.getUser()</span>

<span class="hljs-comment">// + ç¤ºä¾‹</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.BaseService+.*(..))")</span>
<span class="hljs-comment">// åŒ¹é…ï¼šBaseServiceåŠå…¶æ‰€æœ‰å­ç±»çš„æ–¹æ³•</span>
</code></pre>
<h3>2. within è¡¨è¾¾å¼</h3>
<p>within è¡¨è¾¾å¼ç”¨äºåŒ¹é…ç‰¹å®šç±»å‹å†…çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-comment">// åŒ¹é…serviceåŒ…ä¸‹çš„æ‰€æœ‰ç±»</span>
<span class="hljs-meta">@Pointcut("within(com.example.service.*)")</span>

<span class="hljs-comment">// åŒ¹é…serviceåŒ…åŠå­åŒ…ä¸‹çš„æ‰€æœ‰ç±»</span>
<span class="hljs-meta">@Pointcut("within(com.example.service..*)")</span>

<span class="hljs-comment">// åŒ¹é…ç‰¹å®šç±»</span>
<span class="hljs-meta">@Pointcut("within(com.example.service.UserService)")</span>

<span class="hljs-comment">// åŒ¹é…ç‰¹å®šç±»åŠå…¶å­ç±»</span>
<span class="hljs-meta">@Pointcut("within(com.example.service.BaseService+)")</span>
</code></pre>
<h3>3. @annotation è¡¨è¾¾å¼ï¼ˆæ¨èï¼‰</h3>
<p>@annotation è¡¨è¾¾å¼ç”¨äºåŒ¹é…å¸¦æœ‰ç‰¹å®šæ³¨è§£çš„æ–¹æ³•ï¼Œè¿™æ˜¯æœ€çµæ´»å’Œæ¨èçš„æ–¹å¼ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-comment">// åŒ¹é…å¸¦æœ‰@Logæ³¨è§£çš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("@annotation(com.example.annotation.Log)")</span>

<span class="hljs-comment">// åŒ¹é…å¸¦æœ‰@Transactionalæ³¨è§£çš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("@annotation(org.springframework.transaction.annotation.Transactional)")</span>
</code></pre>
<h3>4. @within è¡¨è¾¾å¼</h3>
<p>@within è¡¨è¾¾å¼ç”¨äºåŒ¹é…å¸¦æœ‰ç‰¹å®šæ³¨è§£çš„ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-comment">// åŒ¹é…å¸¦æœ‰@Serviceæ³¨è§£çš„ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("@within(org.springframework.stereotype.Service)")</span>

<span class="hljs-comment">// åŒ¹é…å¸¦æœ‰@RestControlleræ³¨è§£çš„ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("@within(org.springframework.web.bind.annotation.RestController)")</span>
</code></pre>
<h3>5. args è¡¨è¾¾å¼</h3>
<p>args è¡¨è¾¾å¼ç”¨äºåŒ¹é…ç‰¹å®šå‚æ•°ç±»å‹çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-comment">// åŒ¹é…å‚æ•°ä¸ºLongç±»å‹çš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("args(Long)")</span>

<span class="hljs-comment">// åŒ¹é…å‚æ•°ä¸ºStringå’ŒLongç±»å‹çš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("args(String, Long)")</span>

<span class="hljs-comment">// åŒ¹é…ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºStringç±»å‹çš„æ–¹æ³•</span>
<span class="hljs-meta">@Pointcut("args(String, ..)")</span>
</code></pre>
<h3>6. ç»„åˆè¡¨è¾¾å¼</h3>
<p>å¯ä»¥ä½¿ç”¨ <code>&#x26;&#x26;</code>ã€<code>||</code>ã€<code>!</code> ç»„åˆå¤šä¸ªè¡¨è¾¾å¼ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-comment">// ä½¿ç”¨ &#x26;&#x26; (ä¸)</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..)) &#x26;&#x26; @annotation(org.springframework.transaction.annotation.Transactional)")</span>
<span class="hljs-comment">// åŒ¹é…ï¼šserviceåŒ…ä¸‹å¸¦æœ‰@Transactionalæ³¨è§£çš„æ–¹æ³•</span>

<span class="hljs-comment">// ä½¿ç”¨ || (æˆ–)</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..)) || execution(* com.example.controller.*.*(..))")</span>
<span class="hljs-comment">// åŒ¹é…ï¼šserviceåŒ…æˆ–controlleråŒ…ä¸‹çš„æ‰€æœ‰æ–¹æ³•</span>

<span class="hljs-comment">// ä½¿ç”¨ ! (é)</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..)) &#x26;&#x26; !execution(* com.example.service.*.get*(..))")</span>
<span class="hljs-comment">// åŒ¹é…ï¼šserviceåŒ…ä¸‹é™¤äº†getå¼€å¤´çš„æ–¹æ³•</span>

<span class="hljs-comment">// å¤æ‚ç»„åˆ</span>
<span class="hljs-meta">@Pointcut("(execution(* com.example.service.*.*(..)) || execution(* com.example.controller.*.*(..))) &#x26;&#x26; @annotation(com.example.annotation.Log)")</span>
<span class="hljs-comment">// åŒ¹é…ï¼šserviceæˆ–controlleråŒ…ä¸‹å¸¦æœ‰@Logæ³¨è§£çš„æ–¹æ³•</span>
</code></pre>
<h2>ä¸‰ã€åˆ‡å…¥ç‚¹å¤ç”¨</h2>
<p>å¯ä»¥å®šä¹‰å¤šä¸ªåˆ‡å…¥ç‚¹å¹¶å¤ç”¨å®ƒä»¬ã€‚</p>
<pre><code class="hljs language-java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonPointcuts</span> {

    <span class="hljs-comment">// å®šä¹‰serviceå±‚åˆ‡å…¥ç‚¹</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.service..*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serviceLayer</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// å®šä¹‰controllerå±‚åˆ‡å…¥ç‚¹</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.controller..*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">controllerLayer</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// å®šä¹‰repositoryå±‚åˆ‡å…¥ç‚¹</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.repository..*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">repositoryLayer</span><span class="hljs-params">()</span>

    <span class="hljs-comment">// å®šä¹‰æ‰€æœ‰å±‚çš„åˆ‡å…¥ç‚¹</span>
    <span class="hljs-meta">@Pointcut("serviceLayer() || controllerLayer() || repositoryLayer()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">allLayers</span><span class="hljs-params">()</span> {}
}

<span class="hljs-comment">// åœ¨å…¶ä»–åˆ‡é¢ä¸­ä½¿ç”¨</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> {

    <span class="hljs-meta">@Before("com.example.aspect.CommonPointcuts.serviceLayer()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logServiceMethod</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        log.info(<span class="hljs-string">"Serviceæ–¹æ³•æ‰§è¡Œ: {}"</span>, joinPoint.getSignature().getName());
    }

    <span class="hljs-meta">@Before("com.example.aspect.CommonPointcuts.allLayers()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAllMethod</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        log.info(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œ: {}"</span>, joinPoint.getSignature().getName());
    }
}
</code></pre>
<h2>å››ã€å®æˆ˜ç¤ºä¾‹</h2>
<h3>1. ç»Ÿè®¡æ–¹æ³•æ‰§è¡Œæ—¶é—´</h3>
<pre><code class="hljs language-java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceAspect</span> {

    <span class="hljs-meta">@Around("execution(* com.example.service..*.*(..))")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">measureExecutionTime</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> endTime - startTime;

        log.info(<span class="hljs-string">"æ–¹æ³• {} æ‰§è¡Œè€—æ—¶: {}ms"</span>,
            joinPoint.getSignature().toShortString(), duration);

        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3>2. è®°å½•æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼</h3>
<pre><code class="hljs language-java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> {

    <span class="hljs-meta">@Around("execution(* com.example.service..*.*(..))")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">logMethodExecution</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().toShortString();
        Object[] args = joinPoint.getArgs();

        log.info(<span class="hljs-string">"==> æ‰§è¡Œæ–¹æ³•: {}"</span>, methodName);
        log.info(<span class="hljs-string">"==> æ–¹æ³•å‚æ•°: {}"</span>, Arrays.toString(args));

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();
            log.info(<span class="hljs-string">"==> æ–¹æ³•è¿”å›: {}"</span>, result);
            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Throwable e) {
            log.error(<span class="hljs-string">"==> æ–¹æ³•å¼‚å¸¸: {}"</span>, e.getMessage());
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<h2>äº”ã€å°ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº† AOP çš„åŸºç¡€ä½¿ç”¨å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼š</p>
<ul>
<li><strong>é€šçŸ¥ç±»å‹</strong>ï¼š@Beforeã€@Afterã€@AfterReturningã€@AfterThrowingã€@Around</li>
<li><strong>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</strong>ï¼šexecutionã€withinã€@annotationã€@withinã€args</li>
<li><strong>è¡¨è¾¾å¼ç»„åˆ</strong>ï¼šä½¿ç”¨ &#x26;&#x26;ã€||ã€! ç»„åˆå¤šä¸ªè¡¨è¾¾å¼</li>
<li><strong>åˆ‡å…¥ç‚¹å¤ç”¨</strong>ï¼šå®šä¹‰å…¬å…±åˆ‡å…¥ç‚¹ä¾›å¤šä¸ªåˆ‡é¢ä½¿ç”¨</li>
</ul>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£å®ç°æ›´ä¼˜é›…çš„ AOP ç¼–ç¨‹ã€‚</p>a:["$","div",null,{"className":"space-y-6","children":[["$","$Le",null,{"html":"$f"}],"$L10","$L11"]}]
b:["$","aside",null,{"className":"hidden xl:block w-80 flex-shrink-0","children":["$","div",null,{"className":"sticky top-6","children":["$","$L12",null,{"toc":[{"id":"spring-boot-aop-å®Œæ•´æŒ‡å—äºŒåŸºç¡€ä½¿ç”¨å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼","text":"Spring Boot AOP å®Œæ•´æŒ‡å—ï¼ˆäºŒï¼‰ï¼šåŸºç¡€ä½¿ç”¨å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼","depth":1},{"id":"ä¸€åˆ›å»ºç®€å•åˆ‡é¢","text":"ä¸€ã€åˆ›å»ºç®€å•åˆ‡é¢","depth":2},{"id":"1-å®Œæ•´çš„åˆ‡é¢ç¤ºä¾‹","text":"1. å®Œæ•´çš„åˆ‡é¢ç¤ºä¾‹","depth":3},{"id":"2-é€šçŸ¥ç±»å‹è¯¦è§£","text":"2. é€šçŸ¥ç±»å‹è¯¦è§£","depth":3},{"id":"äºŒåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯¦è§£","text":"äºŒã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯¦è§£","depth":2},{"id":"1-execution-è¡¨è¾¾å¼æœ€å¸¸ç”¨","text":"1. execution è¡¨è¾¾å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰","depth":3},{"id":"2-within-è¡¨è¾¾å¼","text":"2. within è¡¨è¾¾å¼","depth":3},{"id":"3-annotation-è¡¨è¾¾å¼æ¨è","text":"3. @annotation è¡¨è¾¾å¼ï¼ˆæ¨èï¼‰","depth":3},{"id":"4-within-è¡¨è¾¾å¼","text":"4. @within è¡¨è¾¾å¼","depth":3},{"id":"5-args-è¡¨è¾¾å¼","text":"5. args è¡¨è¾¾å¼","depth":3},{"id":"6-ç»„åˆè¡¨è¾¾å¼","text":"6. ç»„åˆè¡¨è¾¾å¼","depth":3},{"id":"ä¸‰åˆ‡å…¥ç‚¹å¤ç”¨","text":"ä¸‰ã€åˆ‡å…¥ç‚¹å¤ç”¨","depth":2},{"id":"å››å®æˆ˜ç¤ºä¾‹","text":"å››ã€å®æˆ˜ç¤ºä¾‹","depth":2},{"id":"1-ç»Ÿè®¡æ–¹æ³•æ‰§è¡Œæ—¶é—´","text":"1. ç»Ÿè®¡æ–¹æ³•æ‰§è¡Œæ—¶é—´","depth":3},{"id":"2-è®°å½•æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼","text":"2. è®°å½•æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼","depth":3},{"id":"äº”å°ç»“","text":"äº”ã€å°ç»“","depth":2}]}]}]}]
c:["$","script","script-0",{"src":"/_next/static/chunks/810067374a9e0899.js","async":true}]
d:["$","$L13",null,{"children":["$","$14",null,{"name":"Next.MetadataOutlet","children":"$@15"}]}]
10:["$","$L16",null,{"title":"Spring Boot AOP å®Œæ•´æŒ‡å—ï¼ˆäºŒï¼‰ï¼šåŸºç¡€ä½¿ç”¨å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼"}]
11:["$","section",null,{"className":"mt-10 relative","children":[["$","div",null,{"className":"absolute -inset-4 bg-gradient-to-r from-blue-500/10 via-cyan-500/10 to-blue-500/10 rounded-2xl blur-xl -z-10"}],["$","div",null,{"className":"relative rounded-xl bg-gradient-to-br from-white/90 via-blue-50/60 to-cyan-50/40 dark:from-zinc-900/90 dark:via-blue-950/40 dark:to-cyan-950/20 backdrop-blur-sm border border-blue-200/50 dark:border-blue-800/30 p-8 shadow-xl","children":["$","div",null,{"className":"flex items-start gap-4","children":[["$","div",null,{"className":"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg shadow-blue-500/30","children":["$","svg",null,{"className":"w-6 h-6 text-white","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"}]}]}],["$","div",null,{"className":"flex-1","children":[["$","h3",null,{"className":"font-bold text-lg bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent mb-2","children":"ğŸ’¬ è¯„è®ºåŒº"}],["$","p",null,{"className":"text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed","children":"è¯„è®ºç³»ç»Ÿæœªé›†æˆï¼ˆTwikoo/Waline/Valine ç­‰ï¼‰ã€‚å¦‚éœ€å¯ç”¨ï¼Œè¯·å‘ŠçŸ¥æ‚¨åå¥½çš„æ–¹æ¡ˆã€‚"}],["$","div",null,{"className":"mt-4 flex gap-2","children":[["$","div",null,{"className":"px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs font-medium","children":"Twikoo"}],["$","div",null,{"className":"px-3 py-1 rounded-full bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300 text-xs font-medium","children":"Waline"}],["$","div",null,{"className":"px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs font-medium","children":"Valine"}]]}]]}]]}]}]]}]
15:null
